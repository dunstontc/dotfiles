# =============================================================================
#   Statusline
# =============================================================================
# http://manpages.ubuntu.com/manpages/xenial/man1/tmux.1.html
# show current settings:  $ tmux show-options -g | grep status

# #T - standard window title
# #h - short hostname
# #H - full hostname
# #S - session name
# #I - tmux window number
# #W - tmux window name

# `#F` - (*) Denotes the current window.
# `-`	 - Marks the last window (previously selected).
# `#`	 - Window is monitored and activity has been detected.
# `!`	 - A bell has occurred in the window.
# `~`	 - The window has been silent for the monitor-silence interval.
# `M`	 - The window contains the marked pane.
# `Z`	 - The window’s active pane is zoomed.

# #282c34
# #abb2bf
# #e06c75
# #be5046
# #98c379
# #e5c07b
# #d19a66
# #61afef
# #c678dd
# #56b6c2
# #4b5263
# #5c6370

# |        
# |      
#     
#                                    ⏾
#              
# =============================================================================

# Status
set -g status-fg '#56b6c2'
set -g status-bg black
# set -g status-attr

# Messages
set -ag message-style fg=black
# set -ag message-style bg='#56b6c2'
set -ag message-style bg=default

# =============================================================================

# Default Window Title
set -w -g window-status-fg '#56b6c2'
set -w -g window-status-bg black
set -w -g window-status-attr none
set -w -g window-status-format " #I:#W "
# set -w -g window-status-format " #[fg=#56b6c2,bg=black] #[fg=default,bg=default]#I:#W #[fg=black,bg=#56b6c2]"

# Active Window Title
set -w -g window-status-current-fg black
set -w -g window-status-current-bg '#56b6c2'
set -w -g window-status-current-attr none
set -w -g window-status-current-format " #I:#W "
# set -w -g window-status-current-format '#[fg=#56b6c2,bg=black]#[fg=default,bg=default] #I:#[fg=default]#W #[fg=#56b6c2,bg=black]'
set -w -g window-status-current-format '#[fg=#56b6c2,bg=black]#[fg=default,bg=default] #I:#[fg=default]#W #[fg=#56b6c2,bg=black]'

# =============================================================================

#   Left Status
# set -g status-right '%l:%M %p , %d %b  #{=21:pane_title}'
set -g status-left "#[fg=#e06c75,bg=black]#[fg=#282c34,bg=#e06c75]  #S #[fg=#e06c75,bg=#e5c07b] #[fg=black,bg=#e5c07b] #W #[fg=#e5c07b,bg=#56b6c2] #[fg=black,bg=#56b6c2] #(whoami) #[fg=#56b6c2,bg=default] #[default] "
set -g status-left-length 200

#   Right Status
set -g status-right '#{?client_prefix,⌨  ,} #{?window_zoomed_flag,🔭 ,} #[fg=#99c379,bg=default] #[fg=black,bg=#98c379]%e %B  #[fg=#61afef,bg=#98c379]#[fg=black,bg=#61afef]%l:%M %p  #[fg=#c678dd,bg=#61afef]#[fg=black,bg=#c678dd] #h  #[fg=#c678dd,bg=black]'
set -g status-right-length 140

# =============================================================================
#  Components
# =============================================================================
tone1='#e06c75'
tone2='#e5c07b'
tone3='#56b6c2'
tone4='#99c379'
tone5='#61afef'
tone6='#c678dd'


# =============================================================================
#  Status Left
# =============================================================================
set -g status-left'#[fg=#e06c75,bg=black]'             # Ender
set -ag status-left'#[fg=#282c34,bg=#e06c75]  #S '     # Session
set -ag status-left'#[fg=#e06c75,bg=#e5c07b] '         # Divider
set -ag status-left'#[fg=black,bg=#e5c07b] #W '        # Window
set -ag status-left'#[fg=#e5c07b,bg=#56b6c2] '         # Divider
set -ag status-left'#[fg=black,bg=#56b6c2] #(whoami) ' # User
set -ag status-left'#[fg=#56b6c2,bg=default] '         # Divider
set -ag status-left'#[default] '                        # Reset



# =============================================================================
#  Status Right
# =============================================================================
set -g status-right
"#{?client_prefix,⌨  ,} "
"#{?window_zoomed_flag,🔭 ,} "
"#[fg=#99c379,bg=default] "
"#[fg=black,bg=#98c379]%e %B  "
"#[fg=#61afef,bg=#98c379]"
"#[fg=black,bg=#61afef]%l:%M %p  "
"#[fg=#c678dd,bg=#61afef]"
"#[fg=black,bg=#c678dd] #h  "
"#[fg=#c678dd,bg=black]"







# =============================================================================
# Panes

# Pane Border
set -g pane-border-fg "#4b5263"
set -g pane-border-bg black

set -g pane-active-border-fg "#56b6c2"
# set -g pane-active-border-bg "#56b6c2"


# =============================================================================
# Tests
# set -g status-left "     #[fg=blue,bg=black] #[fg=blue,bg=black]#[fg=blue,bg=blue]   #[fg=blue,bg=black]#[fg=black,bg=black]    #[fg=red,bg=black]#[fg=red,bg=red]   #[fg=red,bg=black]#[fg=black,bg=black]          #[fg=#e06c75,bg=#4b5263]    "


# _circled_digit() {
#   circled_digits='⓪ ① ② ③ ④ ⑤ ⑥ ⑦ ⑧ ⑨ ⑩ ⑪ ⑫ ⑬ ⑭ ⑮ ⑯ ⑰ ⑱ ⑲ ⑳'
#   if [ "$1" -le 20 ] 2>/dev/null; then
#     i=$(( $1 + 1 ))
#     eval set -- "$circled_digits"
#     eval echo "\${$i}"
#   else
#     echo "$1"
#   fi
# }
#
# _maximize_pane() {
#   current_session=${1:-$(tmux display -p '#{session_name}')}
#   current_pane=${2:-$(tmux display -p '#{pane_id}')}
#
#   dead_panes=$(tmux list-panes -s -t "$current_session" -F '#{pane_dead} #{pane_id} #{pane_start_command}' | grep -o '^1 %.\+maximized.\+$' || true)
#   restore=$(echo "$dead_panes" | sed -n -E -e "s/^1 $current_pane .+maximized.+(%[0-9]+)$/tmux swap-pane -s \1 -t $current_pane \; kill-pane -t $current_pane/p" -e "s/^1 (%[0-9]+) .+maximized.+$current_pane$/tmux swap-pane -s \1 -t $current_pane \; kill-pane -t \1/p" )
#
#   if [ -z "$restore" ]; then
#     [ "$(tmux list-panes -t "$current_session:" | wc -l | sed 's/^ *//g')" -eq 1 ] && tmux display "Can't maximize with only one pane" && return
#     window=$(tmux new-window -t "$current_session:" -P "exec maximized... 2> /dev/null & tmux setw -t $current_session: remain-on-exit on; printf 'Pane has been maximized, press <prefix>+ to restore. %s' \\$current_pane")
#     window=${window%.*}
#
#     guard=10
#     while [ x"$(tmux list-panes -t "$window" -F '#{session_name}:#{window_index} #{pane_dead}' 2>/dev/null)" != x"$window 1" ] && [ "$guard" -ne 0 ]; do
#       sleep 0.01
#       guard=$((guard - 1))
#     done
#     if [ "$guard" -eq 0 ]; then
#       tmux display 'Unable to maximize pane'
#     fi
#
#     new_pane=$(tmux display -p '#{pane_id}')
#     tmux setw -t "$window" remain-on-exit off \; swap-pane -s "$current_pane" -t "$new_pane"
#   else
#     $restore || tmux kill-pane
#   fi
# }
#
# _toggle_mouse() {
#   old=$(tmux show -gv mouse)
#   new=""
#
#   if [ "$old" = "on" ]; then
#     new="off"
#   else
#     new="on"
#   fi
#
#   tmux set -g mouse $new \;\
#        display "mouse: $new"
# }
